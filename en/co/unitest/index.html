<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="include: co/unitest.h.
#Basic concepts co.unitest is a unit testing framework, similar to google gtest, but easier to use.
#Test Units and Test Cases A test program can be divided into multiple test units according to functions or modules, and there can be multiple test cases under each test unit. For example, a test unit can be defined for a class (or module) in C&#43;&#43;, and a test case can be defined for each method in the class (or module).">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="Unitest" />
<meta property="og:description" content="include: co/unitest.h.
#Basic concepts co.unitest is a unit testing framework, similar to google gtest, but easier to use.
#Test Units and Test Cases A test program can be divided into multiple test units according to functions or modules, and there can be multiple test cases under each test unit. For example, a test unit can be defined for a class (or module) in C&#43;&#43;, and a test case can be defined for each method in the class (or module)." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://coostdocs.github.io/en/co/unitest/" /><meta property="article:section" content="co" />

<meta property="article:modified_time" content="2023-09-09T08:51:44+08:00" />

<title>Unitest | Documents for Coost</title>
<link rel="manifest" href="../../../manifest.json">
<link rel="icon" href="../../../favicon.png" type="image/x-icon">
  <link rel="alternate" hreflang="cn" href="https://coostdocs.github.io/cn/co/unitest/" title="单元测试">
<link rel="stylesheet" href="../../../book.min.f5f3502a6ddd9742c83280f4b762d6540d5c6fcee9d7c397bd0b67c49d87e959.css" integrity="sha256-9fNQKm3dl0LIMoD0t2LWVA1cb87p18OXvQtnxJ2H6Vk=" crossorigin="anonymous">
  <script defer src="../../../flexsearch.min.js"></script>
  <script defer src="../../../en.search.min.49ad87b00677ec0b6dace2a234712a667da4b1e914ef9ec38cc4517830695526.js" integrity="sha256-Sa2HsAZ37AttrOKiNHEqZn2ksekU757DjMRReDBpVSY=" crossorigin="anonymous"></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  


<link href='//cdn.bootcss.com/highlight.js/11.1.0/styles/github.min.css'
  rel='stylesheet' type='text/css' />


</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a href="../../../cn/"><span>Documents for Coost</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>











  



  
  <ul>
    
      
        <li>
          
  
  

  
    <span>About</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="../../../en/about/co/" class="">Introduction</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/about/contact/" class="">Contact</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/about/sponsor/" class="">Sponsor💕</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <span>Documents</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/def/" class="">Basic Definitions</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/god/" class="">God Oriented Programming</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/mem/" class="">Memory Allocation</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/flag/" class="">flag</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/log/" class="">log</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/unitest/" class=" active">Unitest</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/benchmark/" class="">Benchmark</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/json/" class="">JSON</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-b823a0d731c4d472c5b015b832e5d976" class="toggle"  />
    <label for="section-b823a0d731c4d472c5b015b832e5d976" class="flex justify-between">
      <a role="button" class="">Concurrency</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/concurrency/atomic/" class="">Atomic Operations</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/concurrency/thread/" class="">Thread</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-a8bcee0f770e9eedef784caa025649c4" class="toggle"  />
    <label for="section-a8bcee0f770e9eedef784caa025649c4" class="flex justify-between">
      <a role="button" class="">Coroutine</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/concurrency/coroutine/basic/" class="">Basic concepts</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/concurrency/coroutine/api/" class="">APIs</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/concurrency/coroutine/chan/" class="">Channel</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/concurrency/coroutine/event/" class="">Sync Event</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/concurrency/coroutine/io_event/" class="">IO Event</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/concurrency/coroutine/mutex/" class="">Mutex Lock</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/concurrency/coroutine/wg/" class="">Wait Group</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/concurrency/coroutine/pool/" class="">Coroutine Pool</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/concurrency/coroutine/conf/" class="">Config</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-752f64a904309658adbf6062b2c3d8c1" class="toggle"  />
    <label for="section-752f64a904309658adbf6062b2c3d8c1" class="flex justify-between">
      <a role="button" class="">Network Programming</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/net/byte_order/" class="">Byte order</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/net/sock/" class="">Socket programming</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/net/mode/" class="">Network programming model</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/net/third/" class="">Use third-party network libraries</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/net/tcp/" class="">TCP</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/net/http/" class="">HTTP</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/net/rpc/" class="">RPC</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-76a5d3cff40a8cc3b003b19d517c02e9" class="toggle"  />
    <label for="section-76a5d3cff40a8cc3b003b19d517c02e9" class="flex justify-between">
      <a role="button" class="">others</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/other/console/" class="">Console</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/other/defer/" class="">defer</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/other/error/" class="">Error</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/other/fastring/" class="">fastring</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/other/fastream/" class="">fastream</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/other/stl/" class="">STL</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/other/str/" class="">String Utility</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/other/rand/" class="">Random Value</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/other/hash/" class="">Hash</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/other/time/" class="">Time</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/other/tasked/" class="">Timed task scheduler</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/other/path/" class="">Path</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/other/fs/" class="">File System</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/other/os/" class="">Operating System</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/build/" class="">Compiling</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>















</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="../../../svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Unitest</strong>

  <label for="toc-control">
    
    <img src="../../../svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#basic-concepts">Basic concepts</a>
          <ul>
            <li><a href="#test-units-and-test-cases">Test Units and Test Cases</a></li>
            <li><a href="#def_test">DEF_test</a></li>
            <li><a href="#def_case">DEF_case</a></li>
            <li><a href="#expect-assertion">EXPECT assertion</a></li>
          </ul>
        </li>
        <li><a href="#write-test-code">Write test code</a>
          <ul>
            <li><a href="#test-code-example">Test code example</a></li>
            <li><a href="#default-test-case">Default test case</a></li>
          </ul>
        </li>
        <li><a href="#build-and-run-the-test-program">Build and run the test program</a>
          <ul>
            <li><a href="#build-the-unitest-code">Build the unitest code</a></li>
            <li><a href="#run-all-test-cases">Run all test cases</a></li>
            <li><a href="#run-test-cases-in-specified-test-units">Run test cases in specified test units</a></li>
            <li><a href="#test-result-example">Test result example</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown"><p>include: <a href="https://github.com/idealvin/coost/blob/master/include/co/unitest.h">co/unitest.h</a>.</p>
<h2 id="basic-concepts"><a class="anchor" href="#basic-concepts">#</a>Basic concepts</h2>
<p><strong>co.unitest</strong> is a unit testing framework, similar to <a href="https://github.com/google/googletest">google gtest</a>, but easier to use.</p>
<h3 id="test-units-and-test-cases"><a class="anchor" href="#test-units-and-test-cases">#</a>Test Units and Test Cases</h3>
<p>A test program can be divided into multiple test units according to functions or modules, and there can be multiple test cases under each test unit. For example, a test unit can be defined for a class (or module) in C++, and a test case can be defined for each method in the class (or module).</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>DEF_test(test_name) {
</span></span><span style="display:flex;"><span>    DEF_case(a) {
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">// write test code here
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    DEF_case(b) {
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">// write test code here
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>In the above example, <code>DEF_test</code> defines a test unit (actually defines a function), and <code>DEF_case</code> defines the test case, a test case is actually a code block in the function.</p>
<h3 id="def_test"><a class="anchor" href="#def_test">#</a>DEF_test</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#define DEF_test(_name_) \
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">    DEF_bool(_name_, false, &#34;enable this test if true&#34;); \
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">    ... \
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">    void _co_ut_##_name_(unitest::xx::Test&amp; _t_)
</span></span></span></code></pre></div><ul>
<li>The <code>DEF_test</code> macro is used to define a test unit, and the parameter <code>_name_</code> is the name of the test unit.</li>
<li>The first line of the macro defines a bool flag, which is the switch of the test unit. For example, <code>DEF_test(os)</code> defines a test unit os, and we can use <code>-os</code> in command line to enable test cases in this unit.</li>
<li>The last line of the macro defines the function corresponding to the test unit.</li>
</ul>
<h3 id="def_case"><a class="anchor" href="#def_case">#</a>DEF_case</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#define DEF_case(name) \
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">    _t_.c = #name; \
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">    cout &lt;&lt; &#34; case &#34; &lt;&lt; #name &lt;&lt; &#39;:&#39; &lt;&lt; endl;
</span></span></span></code></pre></div><ul>
<li>The <code>DEF_case</code> macro is used to define a test case in the test unit. The parameter <code>name</code> is the name of the test case. It must be used inside the function defined by <code>DEF_test</code>.</li>
<li>The name of a test unit must be albe to use as part of the class name or variable name. The test case name does not have this restriction. For example, <code>DEF_case(sched.Copool)</code> is also reasonable.</li>
<li>The code of the test case is generally enclosed by a pair of curly braces to isolate it from other test cases.</li>
<li>DEF_test may not contain any DEF_case. In this case, <code>co.unitest</code> will create a default test case.</li>
</ul>
<h3 id="expect-assertion"><a class="anchor" href="#expect-assertion">#</a>EXPECT assertion</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#define EXPECT(x) ...
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#define EXPECT_EQ(x, y) EXPECT_OP(x, y, ==, &#34;EQ&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#define EXPECT_NE(x, y) EXPECT_OP(x, y, !=, &#34;NE&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#define EXPECT_GE(x, y) EXPECT_OP(x, y, &gt;=, &#34;GE&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#define EXPECT_LE(x, y) EXPECT_OP(x, y, &lt;=, &#34;LE&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#define EXPECT_GT(x, y) EXPECT_OP(x, y, &gt;, &#34;GT&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#define EXPECT_LT(x, y) EXPECT_OP(x, y, &lt;, &#34;LT&#34;)
</span></span></span></code></pre></div><ul>
<li><code>EXPECT</code> asserts that <code>x</code> is true, and x can be any expression with a value of type bool.</li>
<li><code>EXPECT_EQ</code> asserts <code>x == y</code>.</li>
<li><code>EXPECT_NE</code> asserts <code>x != y</code>.</li>
<li><code>EXPECT_GE</code> asserts that <code>x &gt;= y</code>.</li>
<li><code>EXPECT_LE</code> asserts that <code>x &lt;= y</code>.</li>
<li><code>EXPECT_GT</code> asserts that <code>x &gt; y</code>.</li>
<li><code>EXPECT_LT</code> asserts that <code>x &lt; y</code>.</li>
<li>When defining a test case with <code>DEF_case</code>, you can use these macro assertions. If an assertion fails, it means that the test case fails. The terminal will print related error messages in red color.</li>
</ul>
<h2 id="write-test-code"><a class="anchor" href="#write-test-code">#</a>Write test code</h2>
<h3 id="test-code-example"><a class="anchor" href="#test-code-example">#</a>Test code example</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#include</span> <span style="color:#999;font-weight:bold;font-style:italic">&#34;co/unitest.h&#34;</span><span style="color:#999;font-weight:bold;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#include</span> <span style="color:#999;font-weight:bold;font-style:italic">&#34;co/os.h&#34;</span><span style="color:#999;font-weight:bold;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic"></span>
</span></span><span style="display:flex;"><span>DEF_test(os) {
</span></span><span style="display:flex;"><span>    DEF_case(homedir) {
</span></span><span style="display:flex;"><span>        EXPECT_NE(os<span style="color:#000;font-weight:bold">::</span>homedir(), <span style="color:#d14">&#34;&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    DEF_case(pid) {
</span></span><span style="display:flex;"><span>        EXPECT_GE(os<span style="color:#000;font-weight:bold">::</span>pid(), <span style="color:#099">0</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    DEF_case(cpunum) {
</span></span><span style="display:flex;"><span>        EXPECT_GT(os<span style="color:#000;font-weight:bold">::</span>cpunum(), <span style="color:#099">0</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#458;font-weight:bold">int</span> <span style="color:#900;font-weight:bold">main</span>(<span style="color:#458;font-weight:bold">int</span> argc, <span style="color:#458;font-weight:bold">char</span><span style="color:#000;font-weight:bold">**</span> argv) {
</span></span><span style="display:flex;"><span>    flag<span style="color:#000;font-weight:bold">::</span>parse(argc, argv);
</span></span><span style="display:flex;"><span>    unitest<span style="color:#000;font-weight:bold">::</span>run_tests();
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span> <span style="color:#099">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>The above code defines a test unit named os, and os has 3 test cases.</li>
<li>When running the test program, you can use <code>-os</code> in the command line to enable this unit test.</li>
<li>In the main function, you need call <code>flag::parse()</code> to parse the command line parameters, and then call the <code>run_tests()</code> method provided by <code>co.unitest</code> to run the unit test code.</li>
</ul>
<h3 id="default-test-case"><a class="anchor" href="#default-test-case">#</a>Default test case</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>DEF_test(os) {
</span></span><span style="display:flex;"><span>    EXPECT_NE(os<span style="color:#000;font-weight:bold">::</span>homedir(), <span style="color:#d14">&#34;&#34;</span>);
</span></span><span style="display:flex;"><span>    EXPECT_GE(os<span style="color:#000;font-weight:bold">::</span>pid(), <span style="color:#099">0</span>);
</span></span><span style="display:flex;"><span>    EXPECT_GT(os<span style="color:#000;font-weight:bold">::</span>cpunum(), <span style="color:#099">0</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>The above code does not contain any DEF_case, <code>co.unitest</code> will create a default test case named <code>default</code>.</li>
<li>For more complex test codes, it is generally not recommended to use the default test cases. It is better to divide them into different cases so that the code looks clearer.</li>
</ul>
<h2 id="build-and-run-the-test-program"><a class="anchor" href="#build-and-run-the-test-program">#</a>Build and run the test program</h2>
<h3 id="build-the-unitest-code"><a class="anchor" href="#build-the-unitest-code">#</a>Build the unitest code</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>xmake -b unitest
</span></span></code></pre></div><ul>
<li>Run the above command in the root directory of coost to compile the unit test code in <a href="https://github.com/idealvin/coost/tree/master/unitest">co/unitest</a> and generate the <code>unitest</code> binary program .</li>
</ul>
<h3 id="run-all-test-cases"><a class="anchor" href="#run-all-test-cases">#</a>Run all test cases</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>xmake r unitest
</span></span></code></pre></div><ul>
<li>Run all test cases by default.</li>
</ul>
<h3 id="run-test-cases-in-specified-test-units"><a class="anchor" href="#run-test-cases-in-specified-test-units">#</a>Run test cases in specified test units</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#998;font-style:italic"># Run only test cases in the os test unit</span>
</span></span><span style="display:flex;"><span>xmake r unitest -os
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># Run test cases in the os or json test units</span>
</span></span><span style="display:flex;"><span>xmake r unitest -os -json
</span></span></code></pre></div><h3 id="test-result-example"><a class="anchor" href="#test-result-example">#</a>Test result example</h3>
<ul>
<li>All tests passed</li>
</ul>
<p><img src="../../../images/unitest_passed.png" alt="unitest_passed.png" /></p>
<ul>
<li>Test case failed</li>
</ul>
<p><img src="../../../images/unitest_failed.png" alt="unitest_failed.png" /></p>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">

  



  
    
  
    
  


  


<div class="book-languages" tabindex="0" aria-haspopup="true">
  <ul>
    <li class="flex align-center">
      <img src="../../../svg/translate.svg" class="book-icon" alt="Languages" />
      English
    </li> 
  </ul>

  <ul class="book-languages-list">
    
    <li class="">
      <a href="../../../cn/co/unitest/" class="flex align-center">
        <img src="../../../svg/translate.svg" class="book-icon" alt="Languages" />
        中文
      </a>
    </li>
    
    <li class="active">
      <a href="../../../en/" class="flex align-center">
        <img src="../../../svg/translate.svg" class="book-icon" alt="Languages" />
        English
      </a>
    </li>
    
  </ul>
</div>




  <div class="book-date"><a class="flex align-center" href="https://github.com/coostdocs/codoc/commit/265464652ec7af99f0d224db2a618227cb64a318" title='Last modified by idealvin | September 9, 2023' target="_blank" rel="noopener">
      <img src="../../../svg/calendar.svg" class="book-icon" alt="Calendar" />
      <span>September 9, 2023</span>
    </a>
  </div>



  <div class="book-edit">
    <a class="flex align-center" href="https://github.com/coostdocs/codoc/edit/master/content/en/co/unitest.md" target="_blank" rel="noopener">
      <img src="../../../svg/edit.svg" class="book-icon" alt="Edit" />
      <span>Edit this page</span>
    </a>
  </div>

</div>

 
        





<script src="//cdn.bootcss.com/highlight.js/11.1.0/highlight.min.js"></script>



<script src="//cdn.bootcss.com/highlight.js/11.1.0/languages/cpp.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/11.1.0/languages/bash.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/11.1.0/languages/lua.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/11.1.0/languages/yaml.min.js"></script>
<script>hljs.configure({ languages: [] }); hljs.initHighlightingOnLoad();</script>





      </footer>

      
  
  <div class="book-comments">


<link rel="stylesheet" href="//cdn.bootcss.com/gitalk/1.7.2/gitalk.min.css">
<script src="//cdn.bootcss.com/gitalk/1.7.2/gitalk.min.js"></script>
<div id="gitalk-container"></div>
<script type="text/javascript">
  var gitalk = new Gitalk({
    clientID: '11f9ff9ca43804d70b32',
    clientSecret: '07e2bd5b09a1654e7942a7698c3ec164e7566177',
    repo: 'gitalk',
    owner: 'idealvin',
    admin: ['idealvin'],
    id: location.pathname,
    language: 'zh-CN',
    distractionFreeMode: false,
    proxy: 'https:\/\/cors-anywhere.azm.workers.dev\/https:\/\/github.com\/login\/oauth\/access_token'
  })
  gitalk.render('gitalk-container');
</script></div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#basic-concepts">Basic concepts</a>
          <ul>
            <li><a href="#test-units-and-test-cases">Test Units and Test Cases</a></li>
            <li><a href="#def_test">DEF_test</a></li>
            <li><a href="#def_case">DEF_case</a></li>
            <li><a href="#expect-assertion">EXPECT assertion</a></li>
          </ul>
        </li>
        <li><a href="#write-test-code">Write test code</a>
          <ul>
            <li><a href="#test-code-example">Test code example</a></li>
            <li><a href="#default-test-case">Default test case</a></li>
          </ul>
        </li>
        <li><a href="#build-and-run-the-test-program">Build and run the test program</a>
          <ul>
            <li><a href="#build-the-unitest-code">Build the unitest code</a></li>
            <li><a href="#run-all-test-cases">Run all test cases</a></li>
            <li><a href="#run-test-cases-in-specified-test-units">Run test cases in specified test units</a></li>
            <li><a href="#test-result-example">Test result example</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












