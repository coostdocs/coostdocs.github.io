<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="include: co/fastream.h.
#fastream fastream is used to replace std::ostringstream in the C&#43;&#43; standard library. The performance of std::ostringstream is poor which may be several times slower than snprintf, and fastream is about 10~30 times faster than snprintf on different platforms.
#fastream::fastream fastream() noexcept; explicit fastream(size_t cap); fastream(fastream&amp;&amp; s) noexcept;   The first one is the default constructor, which creates an empty fastream object without any memory allocation.
  The second constructor uses the parameter cap to specify the initial capacity of fastream.">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="fastream" />
<meta property="og:description" content="include: co/fastream.h.
#fastream fastream is used to replace std::ostringstream in the C&#43;&#43; standard library. The performance of std::ostringstream is poor which may be several times slower than snprintf, and fastream is about 10~30 times faster than snprintf on different platforms.
#fastream::fastream fastream() noexcept; explicit fastream(size_t cap); fastream(fastream&amp;&amp; s) noexcept;   The first one is the default constructor, which creates an empty fastream object without any memory allocation.
  The second constructor uses the parameter cap to specify the initial capacity of fastream." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cocoyaxi.github.io/en/co/fastream/" /><meta property="article:section" content="co" />

<meta property="article:modified_time" content="2022-06-01T21:49:46+08:00" />

<title>fastream | Documents for CO</title>
<link rel="manifest" href="../../../manifest.json">
<link rel="icon" href="../../../favicon.png" type="image/x-icon">
  <link rel="alternate" hreflang="cn" href="https://cocoyaxi.github.io/cn/co/fastream/" title="å­—ç¬¦æµ(fastream)">
<link rel="stylesheet" href="../../../book.min.0608a3570dae40fa4b3de520d6a873cc9855bb4cb5001c4b16e95a226b84aff8.css" integrity="sha256-BgijVw2uQPpLPeUg1qhzzJhVu0y1ABxLFulaImuEr/g=" crossorigin="anonymous">
  <script defer src="../../../flexsearch.min.js"></script>
  <script defer src="../../../en.search.min.8eb94eee8858a2b3bd574853da15048734194c1e10816191e59c515ae9817ed5.js" integrity="sha256-jrlO7ohYorO9V0hT2hUEhzQZTB4QgWGR5ZxRWumBftU=" crossorigin="anonymous"></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  


<link href='//cdn.bootcss.com/highlight.js/11.1.0/styles/github.min.css'
  rel='stylesheet' type='text/css' />


</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a href="../../../cn/"><span>Documents for CO</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>











  



  
  <ul>
    
      
        <li>
          
  
  

  
    <span>About</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="../../../en/about/co/" class="">Introduction</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/about/contact/" class="">Contact</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/about/sponsor/" class="">SponsorðŸ’•</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <span>Documents for CO</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/def/" class="">Basic definitions</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/defer/" class="">defer</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/atomic/" class="">Atomic Operations</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/fastring/" class="">fastring</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/fastream/" class=" active">fastream</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/str/" class="">String utilities</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/flag/" class="">co/flag</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/log/" class="">co/log</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/unitest/" class="">Unitest</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/json/" class="">JSON</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/time/" class="">Time</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/thread/" class="">Thread</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/coroutine/" class="">Coroutine</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-752f64a904309658adbf6062b2c3d8c1" class="toggle"  />
    <label for="section-752f64a904309658adbf6062b2c3d8c1" class="flex justify-between">
      <a role="button" class="">Network Programming</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/net/byte_order/" class="">Byte order</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/net/tcp/" class="">TCP</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/net/http/" class="">HTTP</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/net/rpc/" class="">RPC</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/tasked/" class="">Timed task scheduler</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/random/" class="">Random number</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/lrumap/" class="">LruMap</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/hash/" class="">Hash</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/path/" class="">Path</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/fs/" class="">File System</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/os/" class="">Operating System</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="../../../en/co/build/" class="">Compiling</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>















</nav>




  <script>(function(){var a=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="../../../svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>fastream</strong>

  <label for="toc-control">
    
    <img src="../../../svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#fastream">fastream</a>
          <ul>
            <li><a href="#fastreamfastream">fastream::fastream</a></li>
            <li><a href="#fastreamoperator">fastream::operator=</a></li>
            <li><a href="#heading">â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</a></li>
            <li><a href="#fastreamback">fastream::back</a></li>
            <li><a href="#fastreamfront">fastream::front</a></li>
            <li><a href="#fastreamoperator-1">fastream::operator[]</a></li>
            <li><a href="#heading-1">â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</a></li>
            <li><a href="#fastreamcapacity">fastream::capacity</a></li>
            <li><a href="#fastreamc_str">fastream::c_str</a></li>
            <li><a href="#fastreamdata">fastream::data</a></li>
            <li><a href="#fastreamempty">fastream::empty</a></li>
            <li><a href="#fastreamsize">fastream::size</a></li>
            <li><a href="#fastreamstr">fastream::str</a></li>
            <li><a href="#heading-2">â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</a></li>
            <li><a href="#fastreamappend">fastream::append</a></li>
            <li><a href="#fastreamcat">fastream::cat</a></li>
            <li><a href="#fastreamoperator-2">fastream::operator&laquo;</a></li>
            <li><a href="#heading-3">â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</a></li>
            <li><a href="#fastreamclear">fastream::clear</a></li>
            <li><a href="#fastreamensure">fastream::ensure</a></li>
            <li><a href="#fastreamreset">fastream::reset</a></li>
            <li><a href="#fastreamreserve">fastream::reserve</a></li>
            <li><a href="#fastreamresize">fastream::resize</a></li>
            <li><a href="#fastreamsafe_clear">fastream::safe_clear</a></li>
            <li><a href="#fastreamswap">fastream::swap</a></li>
            <li><a href="#heading-4">â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</a></li>
            <li><a href="#interoperability-with-fastring">Interoperability with fastring</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown"><p>include: <a href="https://github.com/idealvin/co/blob/master/include/co/fastream.h">co/fastream.h</a>.</p>
<h2 id="fastream"><a class="anchor" href="#fastream">#</a>fastream</h2>
<p><code>fastream</code> is used to replace <code>std::ostringstream</code> in the C++ standard library. The performance of std::ostringstream is poor which may be several times slower than <code>snprintf</code>, and fastream is about 10~30 times faster than snprintf on different platforms.</p>
<h3 id="fastreamfastream"><a class="anchor" href="#fastreamfastream">#</a>fastream::fastream</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp">fastream() <span style="color:#000;font-weight:bold">noexcept</span>;
<span style="color:#000;font-weight:bold">explicit</span> <span style="color:#900;font-weight:bold">fastream</span>(size_t cap);
fastream(fastream<span style="color:#000;font-weight:bold">&amp;&amp;</span> s) <span style="color:#000;font-weight:bold">noexcept</span>;
</code></pre></div><ul>
<li>
<p>The first one is the default constructor, which creates an empty fastream object without any memory allocation.</p>
</li>
<li>
<p>The second constructor uses the parameter cap to specify the initial capacity of fastream.</p>
</li>
<li>
<p>The third is the move constructor.</p>
</li>
<li>
<p>Example</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp">fastream s;              <span style="color:#998;font-style:italic">// fastream with empty status, no memory allocated
</span><span style="color:#998;font-style:italic"></span>fastream <span style="color:#900;font-weight:bold">s</span>(<span style="color:#099">1024</span>);        <span style="color:#998;font-style:italic">// Pre-allocate 1k memory
</span><span style="color:#998;font-style:italic"></span>fastream <span style="color:#900;font-weight:bold">x</span>(std<span style="color:#000;font-weight:bold">::</span>move(s); <span style="color:#998;font-style:italic">// move constructor, s becomes an empty object
</span></code></pre></div><h3 id="fastreamoperator"><a class="anchor" href="#fastreamoperator">#</a>fastream::operator=</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp">fastream<span style="color:#000;font-weight:bold">&amp;</span> <span style="color:#000;font-weight:bold">operator</span><span style="color:#000;font-weight:bold">=</span>(fastream<span style="color:#000;font-weight:bold">&amp;&amp;</span> s) <span style="color:#000;font-weight:bold">noexcept</span>;
</code></pre></div><ul>
<li>
<p>Move assignment, the content of s is transferred to fastream, and s itself becomes an empty object.</p>
</li>
<li>
<p>Example</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp">fastream <span style="color:#900;font-weight:bold">s</span>(<span style="color:#099">32</span>);
fastream x;
x <span style="color:#000;font-weight:bold">=</span> std<span style="color:#000;font-weight:bold">::</span>move(s); <span style="color:#998;font-style:italic">// x capacity -&gt; 32, s -&gt; empty
</span></code></pre></div><h3 id="heading"><a class="anchor" href="#heading">#</a>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</h3>
<h3 id="fastreamback"><a class="anchor" href="#fastreamback">#</a>fastream::back</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#458;font-weight:bold">char</span><span style="color:#000;font-weight:bold">&amp;</span> back() <span style="color:#000;font-weight:bold">const</span>;
</code></pre></div><ul>
<li>
<p>This method returns a reference to the last character in fastream.</p>
</li>
<li>
<p>If fastream is empty, calling this method will cause undefined behavior.</p>
</li>
<li>
<p>Example</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp">fastream s;
s.append(<span style="color:#d14">&#34;hello&#34;</span>);
<span style="color:#458;font-weight:bold">char</span> c <span style="color:#000;font-weight:bold">=</span> s.back(); <span style="color:#998;font-style:italic">// c =&#39;o&#39;
</span><span style="color:#998;font-style:italic"></span>s.back() <span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#39;x&#39;</span>;     <span style="color:#998;font-style:italic">// s -&gt; &#34;hellx&#34;
</span></code></pre></div><h3 id="fastreamfront"><a class="anchor" href="#fastreamfront">#</a>fastream::front</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#458;font-weight:bold">char</span><span style="color:#000;font-weight:bold">&amp;</span> front() <span style="color:#000;font-weight:bold">const</span>;
</code></pre></div><ul>
<li>
<p>This method returns a reference to the first character in fastream.</p>
</li>
<li>
<p>If fastream is empty, calling this method will cause undefined behavior.</p>
</li>
<li>
<p>Example</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp">fastream s;
s.append(<span style="color:#d14">&#34;hello&#34;</span>);
<span style="color:#458;font-weight:bold">char</span> c <span style="color:#000;font-weight:bold">=</span> s.front(); <span style="color:#998;font-style:italic">// c =&#39;h&#39;
</span><span style="color:#998;font-style:italic"></span>s.front() <span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#39;x&#39;</span>;     <span style="color:#998;font-style:italic">// s -&gt; &#34;xello&#34;
</span></code></pre></div><h3 id="fastreamoperator-1"><a class="anchor" href="#fastreamoperator-1">#</a>fastream::operator[]</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#458;font-weight:bold">char</span><span style="color:#000;font-weight:bold">&amp;</span> <span style="color:#000;font-weight:bold">operator</span>[](size_t n) <span style="color:#000;font-weight:bold">const</span>;
</code></pre></div><ul>
<li>
<p>This method returns the reference of the nth character in fastream.</p>
</li>
<li>
<p>If n is out of a reasonable range, calling this method will cause undefined behavior.</p>
</li>
<li>
<p>Example</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp">fastream s;
s.append(<span style="color:#d14">&#34;hello&#34;</span>);
<span style="color:#458;font-weight:bold">char</span> c <span style="color:#000;font-weight:bold">=</span> s[<span style="color:#099">1</span>]; <span style="color:#998;font-style:italic">// c =&#39;e&#39;
</span><span style="color:#998;font-style:italic"></span>s[<span style="color:#099">1</span>] <span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#39;x&#39;</span>;     <span style="color:#998;font-style:italic">// s -&gt; &#34;hxllo&#34;
</span></code></pre></div><h3 id="heading-1"><a class="anchor" href="#heading-1">#</a>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</h3>
<h3 id="fastreamcapacity"><a class="anchor" href="#fastreamcapacity">#</a>fastream::capacity</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp">size_t <span style="color:#900;font-weight:bold">capacity</span>() <span style="color:#000;font-weight:bold">const</span>;
</code></pre></div><ul>
<li>This method returns the capacity of fastream.</li>
</ul>
<h3 id="fastreamc_str"><a class="anchor" href="#fastreamc_str">#</a>fastream::c_str</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#000;font-weight:bold">const</span> <span style="color:#458;font-weight:bold">char</span><span style="color:#000;font-weight:bold">*</span> <span style="color:#900;font-weight:bold">c_str</span>() <span style="color:#000;font-weight:bold">const</span>;
</code></pre></div><ul>
<li>This method gets the equivalent C string.</li>
<li>This method adds a &lsquo;\0&rsquo; to the end of fastream, it will not change the size and content of fastream, but may cause internal reallocation of memory.</li>
</ul>
<h3 id="fastreamdata"><a class="anchor" href="#fastreamdata">#</a>fastream::data</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#000;font-weight:bold">const</span> <span style="color:#458;font-weight:bold">char</span><span style="color:#000;font-weight:bold">*</span> <span style="color:#900;font-weight:bold">data</span>() <span style="color:#000;font-weight:bold">const</span>;
</code></pre></div><ul>
<li>This method is similar to c_str(), but it does not guarantee that the string ends with &lsquo;\0&rsquo;.</li>
</ul>
<h3 id="fastreamempty"><a class="anchor" href="#fastreamempty">#</a>fastream::empty</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#458;font-weight:bold">bool</span> <span style="color:#900;font-weight:bold">empty</span>() <span style="color:#000;font-weight:bold">const</span>;
</code></pre></div><ul>
<li>This method determines whether fastream is empty.</li>
</ul>
<h3 id="fastreamsize"><a class="anchor" href="#fastreamsize">#</a>fastream::size</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp">size_t <span style="color:#900;font-weight:bold">size</span>() <span style="color:#000;font-weight:bold">const</span>;
</code></pre></div><ul>
<li>This method returns the length of data in fastream.</li>
</ul>
<h3 id="fastreamstr"><a class="anchor" href="#fastreamstr">#</a>fastream::str</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp">fastring <span style="color:#900;font-weight:bold">str</span>() <span style="color:#000;font-weight:bold">const</span>;
</code></pre></div><ul>
<li>
<p>This method returns a copy of fastream&rsquo;s internal data in the form of fastring.</p>
</li>
<li>
<p>Example</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp">fastream s;
s.append(<span style="color:#d14">&#34;hello&#34;</span>);
fastring x <span style="color:#000;font-weight:bold">=</span> s.str(); <span style="color:#998;font-style:italic">// x = &#34;hello&#34;
</span></code></pre></div><h3 id="heading-2"><a class="anchor" href="#heading-2">#</a>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</h3>
<h3 id="fastreamappend"><a class="anchor" href="#fastreamappend">#</a>fastream::append</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#099">1.</span>  fastream<span style="color:#000;font-weight:bold">&amp;</span> append(<span style="color:#000;font-weight:bold">const</span> <span style="color:#458;font-weight:bold">void</span><span style="color:#000;font-weight:bold">*</span> s, size_t n);
<span style="color:#099">2.</span>  fastream<span style="color:#000;font-weight:bold">&amp;</span> append(<span style="color:#000;font-weight:bold">const</span> <span style="color:#458;font-weight:bold">char</span><span style="color:#000;font-weight:bold">*</span> s);
<span style="color:#099">3.</span>  fastream<span style="color:#000;font-weight:bold">&amp;</span> append(<span style="color:#000;font-weight:bold">const</span> fastring<span style="color:#000;font-weight:bold">&amp;</span> s);
<span style="color:#099">4.</span>  fastream<span style="color:#000;font-weight:bold">&amp;</span> append(<span style="color:#000;font-weight:bold">const</span> std<span style="color:#000;font-weight:bold">::</span>string<span style="color:#000;font-weight:bold">&amp;</span> s);
<span style="color:#099">5.</span>  fastream<span style="color:#000;font-weight:bold">&amp;</span> append(<span style="color:#000;font-weight:bold">const</span> fastream<span style="color:#000;font-weight:bold">&amp;</span> s);
<span style="color:#099">6.</span>  fastream<span style="color:#000;font-weight:bold">&amp;</span> append(size_t n, <span style="color:#458;font-weight:bold">char</span> c);
<span style="color:#099">7.</span>  fastream<span style="color:#000;font-weight:bold">&amp;</span> append(<span style="color:#458;font-weight:bold">char</span> c, size_t n);
<span style="color:#099">8.</span>  fastream<span style="color:#000;font-weight:bold">&amp;</span> append(<span style="color:#458;font-weight:bold">char</span> c);
<span style="color:#099">9.</span>  fastream<span style="color:#000;font-weight:bold">&amp;</span> append(<span style="color:#458;font-weight:bold">signed</span> <span style="color:#458;font-weight:bold">char</span> v)
<span style="color:#099">10.</span> fastream<span style="color:#000;font-weight:bold">&amp;</span> append(<span style="color:#458;font-weight:bold">unsigned</span> <span style="color:#458;font-weight:bold">char</span> c);
<span style="color:#099">11.</span> fastream<span style="color:#000;font-weight:bold">&amp;</span> append(<span style="color:#458;font-weight:bold">short</span> v);
<span style="color:#099">12.</span> fastream<span style="color:#000;font-weight:bold">&amp;</span> append(<span style="color:#458;font-weight:bold">unsigned</span> <span style="color:#458;font-weight:bold">short</span> v);
<span style="color:#099">13.</span> fastream<span style="color:#000;font-weight:bold">&amp;</span> append(<span style="color:#458;font-weight:bold">int</span> v);
<span style="color:#099">14.</span> fastream<span style="color:#000;font-weight:bold">&amp;</span> append(<span style="color:#458;font-weight:bold">unsigned</span> <span style="color:#458;font-weight:bold">int</span> v);
<span style="color:#099">15.</span> fastream<span style="color:#000;font-weight:bold">&amp;</span> append(<span style="color:#458;font-weight:bold">long</span> v);
<span style="color:#099">16.</span> fastream<span style="color:#000;font-weight:bold">&amp;</span> append(<span style="color:#458;font-weight:bold">unsigned</span> <span style="color:#458;font-weight:bold">long</span> v);
<span style="color:#099">17.</span> fastream<span style="color:#000;font-weight:bold">&amp;</span> append(<span style="color:#458;font-weight:bold">long</span> <span style="color:#458;font-weight:bold">long</span> v);
<span style="color:#099">18.</span> fastream<span style="color:#000;font-weight:bold">&amp;</span> append(<span style="color:#458;font-weight:bold">unsigned</span> <span style="color:#458;font-weight:bold">long</span> <span style="color:#458;font-weight:bold">long</span> v);
</code></pre></div><ul>
<li>
<p>The first version appends a byte sequence of length n.</p>
</li>
<li>
<p>The second version appends a C string. Unlike fastring, fastream does not check whether the memory overlaps, and s cannot be part of the fastream performing the append operation.</p>
</li>
<li>
<p>The 3rd and 4th versions appends fastring and std::string respectively.</p>
</li>
<li>
<p>The 5th version appends fastream, s can be the fastream performing the append operation.</p>
</li>
<li>
<p>The 6th and 7th versions appends n characters c.</p>
</li>
<li>
<p>The 8th to 10th versions appends a single character c.</p>
</li>
<li>
<p>The 11th to 18th versions appends 8 built-in integer types in binary form, which is equivalent to <code>append(&amp;v, sizeof(v))</code>.</p>
</li>
<li>
<p>Example</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp">fastream s;
int32 i <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">7</span>;
<span style="color:#458;font-weight:bold">char</span> buf[<span style="color:#099">8</span>];

s.append(<span style="color:#d14">&#34;xx&#34;</span>);      <span style="color:#998;font-style:italic">// Append C string
</span><span style="color:#998;font-style:italic"></span>s.append(s);         <span style="color:#998;font-style:italic">// append itself, s -&gt; &#34;xxxx&#34;
</span><span style="color:#998;font-style:italic"></span>s.append(buf, <span style="color:#099">8</span>);    <span style="color:#998;font-style:italic">// Append 8 bytes
</span><span style="color:#998;font-style:italic"></span>s.append(<span style="color:#d14">&#39;c&#39;</span>);       <span style="color:#998;font-style:italic">// Append a single character
</span><span style="color:#998;font-style:italic"></span>s.append(<span style="color:#099">100</span>,<span style="color:#d14">&#39;c&#39;</span>);   <span style="color:#998;font-style:italic">// Append 100&#39;c&#39;
</span><span style="color:#998;font-style:italic"></span>s.append(<span style="color:#d14">&#39;c&#39;</span>, <span style="color:#099">100</span>);  <span style="color:#998;font-style:italic">// append 100&#39;c&#39;
</span><span style="color:#998;font-style:italic"></span>
s.append(<span style="color:#000;font-weight:bold">&amp;</span>i, <span style="color:#099">4</span>);     <span style="color:#998;font-style:italic">// Append 4 bytes
</span><span style="color:#998;font-style:italic"></span>s.append(i);         <span style="color:#998;font-style:italic">// Append 4 bytes, same as above
</span><span style="color:#998;font-style:italic"></span>s.append((int16)<span style="color:#099">23</span>); <span style="color:#998;font-style:italic">// Append 2 bytes
</span><span style="color:#998;font-style:italic"></span>
<span style="color:#998;font-style:italic">// The following usage is wrong and unsafe
</span><span style="color:#998;font-style:italic"></span>s.append(s.c_str() <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">1</span>);
</code></pre></div><h3 id="fastreamcat"><a class="anchor" href="#fastreamcat">#</a>fastream::cat</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#000;font-weight:bold">template</span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#000;font-weight:bold">typename</span> X, <span style="color:#000;font-weight:bold">typename</span> ...V<span style="color:#000;font-weight:bold">&gt;</span>
fastream<span style="color:#000;font-weight:bold">&amp;</span> cat(X<span style="color:#000;font-weight:bold">&amp;&amp;</span> x, V<span style="color:#000;font-weight:bold">&amp;&amp;</span> ... v);
</code></pre></div><ul>
<li>
<p>Added in v2.0.3. Concatenate any number of elements to fastream.</p>
</li>
<li>
<p>This method appends elements in the parameters to fastream one by one through <code>operator&lt;&lt;</code>.</p>
</li>
<li>
<p>Example</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp">fastream s;
s <span style="color:#000;font-weight:bold">&lt;&lt;</span> <span style="color:#d14">&#34;hello&#34;</span>;
s.cat(<span style="color:#a61717;background-color:#e3d2d2">&#39;&#39;</span>, <span style="color:#099">23</span>, <span style="color:#d14">&#34;xx&#34;</span>, <span style="color:#0086b3">false</span>); <span style="color:#998;font-style:italic">// s -&gt; &#34;hello 23xxfalse&#34;
</span></code></pre></div><h3 id="fastreamoperator-2"><a class="anchor" href="#fastreamoperator-2">#</a>fastream::operator&laquo;</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp">fastream<span style="color:#000;font-weight:bold">&amp;</span> <span style="color:#000;font-weight:bold">operator</span><span style="color:#000;font-weight:bold">&lt;&lt;</span>(<span style="color:#000;font-weight:bold">const</span> <span style="color:#458;font-weight:bold">signed</span> <span style="color:#458;font-weight:bold">char</span><span style="color:#000;font-weight:bold">*</span> s);
fastream<span style="color:#000;font-weight:bold">&amp;</span> <span style="color:#000;font-weight:bold">operator</span><span style="color:#000;font-weight:bold">&lt;&lt;</span>(<span style="color:#000;font-weight:bold">const</span> <span style="color:#458;font-weight:bold">unsigned</span> <span style="color:#458;font-weight:bold">char</span><span style="color:#000;font-weight:bold">*</span> s);
<span style="color:#000;font-weight:bold">template</span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#000;font-weight:bold">typename</span> T<span style="color:#000;font-weight:bold">&gt;</span> fastream<span style="color:#000;font-weight:bold">&amp;</span> <span style="color:#000;font-weight:bold">operator</span><span style="color:#000;font-weight:bold">&lt;&lt;</span>(T<span style="color:#000;font-weight:bold">&amp;&amp;</span> t);
</code></pre></div><ul>
<li>
<p>The first two versions are added in v2.0.3, which are equivalent to <code>fastream&amp; operator&lt;&lt;(const char* s)</code>.</p>
</li>
<li>
<p>In the third version, T can be any basic type (bool, char, int, double, void*, etc.), string type (const char*, fastring, std::string) or fastream.</p>
</li>
<li>
<p>Unlike fastring, fastream <strong>does not perform memory security checks</strong>, operations like <code>s &lt;&lt; s.c_str() + 3;</code> are not safe.</p>
</li>
<li>
<p>Example</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp">fastream s;
s <span style="color:#000;font-weight:bold">&lt;&lt;</span> <span style="color:#0086b3">false</span>;         <span style="color:#998;font-style:italic">// s -&gt; &#34;false&#34;
</span><span style="color:#998;font-style:italic"></span>s.clear();
s <span style="color:#000;font-weight:bold">&lt;&lt;</span> <span style="color:#d14">&#34;hello &#34;</span><span style="color:#000;font-weight:bold">&lt;&lt;</span> <span style="color:#099">23</span>; <span style="color:#998;font-style:italic">// s -&gt; &#34;hello 23&#34;
</span><span style="color:#998;font-style:italic"></span>s <span style="color:#000;font-weight:bold">&lt;&lt;</span> <span style="color:#a61717;background-color:#e3d2d2">&#39;&#39;</span>;            <span style="color:#998;font-style:italic">// s -&gt; &#34;hello 23 &#34;
</span><span style="color:#998;font-style:italic"></span>s <span style="color:#000;font-weight:bold">&lt;&lt;</span> s;             <span style="color:#998;font-style:italic">// s -&gt; &#34;hello 23 hello 23 &#34;
</span></code></pre></div><h3 id="heading-3"><a class="anchor" href="#heading-3">#</a>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</h3>
<h3 id="fastreamclear"><a class="anchor" href="#fastreamclear">#</a>fastream::clear</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">clear</span>();
</code></pre></div><ul>
<li>This method only sets the size of fastream to 0, and the capacity remains unchanged.</li>
</ul>
<h3 id="fastreamensure"><a class="anchor" href="#fastreamensure">#</a>fastream::ensure</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">ensure</span>(size_t n);
</code></pre></div><ul>
<li>This method ensures that the remaining memory of fastream can hold at least n characters.</li>
</ul>
<h3 id="fastreamreset"><a class="anchor" href="#fastreamreset">#</a>fastream::reset</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">reset</span>();
</code></pre></div><ul>
<li>Added in v2.0.3. Clear fastream and free the memory.</li>
</ul>
<h3 id="fastreamreserve"><a class="anchor" href="#fastreamreserve">#</a>fastream::reserve</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">reserve</span>(size_t n);
</code></pre></div><ul>
<li>This method adjusts the capacity of fastream to ensure that the capacity is at least n.</li>
</ul>
<h3 id="fastreamresize"><a class="anchor" href="#fastreamresize">#</a>fastream::resize</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">resize</span>(size_t n);
</code></pre></div><ul>
<li>
<p>This method sets the size of fastream to n.</p>
</li>
<li>
<p>When n is greater than the original size, this operation will expand size to n, but will not fill the expanded part with &lsquo;\0&rsquo;.</p>
</li>
<li>
<p>Example</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp">fastream s;
s.append(<span style="color:#d14">&#34;hello&#34;</span>);
s.resize(<span style="color:#099">3</span>);   <span style="color:#998;font-style:italic">// s -&gt; &#34;hel&#34;
</span><span style="color:#998;font-style:italic"></span>s.resize(<span style="color:#099">6</span>);
<span style="color:#458;font-weight:bold">char</span> c <span style="color:#000;font-weight:bold">=</span> s[<span style="color:#099">5</span>]; <span style="color:#998;font-style:italic">// c is an uncertain random value
</span></code></pre></div><h3 id="fastreamsafe_clear"><a class="anchor" href="#fastreamsafe_clear">#</a>fastream::safe_clear</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">safe_clear</span>();
</code></pre></div><ul>
<li>Like the clear(), but will fill the internal memory with zeros.</li>
</ul>
<h3 id="fastreamswap"><a class="anchor" href="#fastreamswap">#</a>fastream::swap</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">swap</span>(fastream<span style="color:#000;font-weight:bold">&amp;</span> s) <span style="color:#000;font-weight:bold">noexcept</span>;
<span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">swap</span>(fastream<span style="color:#000;font-weight:bold">&amp;&amp;</span> s) <span style="color:#000;font-weight:bold">noexcept</span>;
</code></pre></div><ul>
<li>
<p>This method exchanges the contents of two fastreams, only the internal pointer, capacity, and size are exchanged.</p>
</li>
<li>
<p>Example</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp">fastream <span style="color:#900;font-weight:bold">s</span>(<span style="color:#099">32</span>);
fastring <span style="color:#900;font-weight:bold">x</span>(<span style="color:#099">64</span>);
s.swap(x); <span style="color:#998;font-style:italic">// s: cap -&gt; 64, x: cap -&gt; 32
</span></code></pre></div><h3 id="heading-4"><a class="anchor" href="#heading-4">#</a>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</h3>
<h3 id="interoperability-with-fastring"><a class="anchor" href="#interoperability-with-fastring">#</a>Interoperability with fastring</h3>
<p><code>fastream</code> and <code>fastring</code> are both inherited from <code>fast::stream</code>, the memory structure of them is exactly the same, so they can be easily converted to each other:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp">fastream s;
s.append(<span style="color:#d14">&#34;Hello&#34;</span>);
((fastring<span style="color:#000;font-weight:bold">&amp;</span>)s).tolower(); <span style="color:#998;font-style:italic">// s -&gt; &#34;hello&#34;
</span><span style="color:#998;font-style:italic"></span>
fastring x;
<span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">f</span>(fastream<span style="color:#000;font-weight:bold">&amp;</span>);
f((fastream<span style="color:#000;font-weight:bold">&amp;</span>)x);
</code></pre></div><p>As mentioned earlier, the append operation of fastream will not check memory overlap. If necessary, it can be converted to fastring to perform the operation safely:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp">fastream s;
s.append(<span style="color:#d14">&#34;hello&#34;</span>);
((fastring<span style="color:#000;font-weight:bold">&amp;</span>)s).append(s.c_str() <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">1</span>);
</code></pre></div></article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">

  



  
    
  
    
  


  


<div class="book-languages" tabindex="0" aria-haspopup="true">
  <ul>
    <li class="flex align-center">
      <img src="../../../svg/translate.svg" class="book-icon" alt="Languages" />
      English
    </li> 
  </ul>

  <ul class="book-languages-list">
    
    <li class="">
      <a href="../../../cn/co/fastream/" class="flex align-center">
        <img src="../../../svg/translate.svg" class="book-icon" alt="Languages" />
        ä¸­æ–‡
      </a>
    </li>
    
    <li class="active">
      <a href="../../../en/" class="flex align-center">
        <img src="../../../svg/translate.svg" class="book-icon" alt="Languages" />
        English
      </a>
    </li>
    
  </ul>
</div>




  <div class="book-date"><a class="flex align-center" href="https://github.com/cocoyaxi/codoc/commit/073b0c9ad35eca55d41bbec1a278a6cb87f1aa36" title='Last modified by idealvin | June 1, 2022' target="_blank" rel="noopener">
      <img src="../../../svg/calendar.svg" class="book-icon" alt="Calendar" />
      <span>June 1, 2022</span>
    </a>
  </div>



  <div class="book-edit">
    <a class="flex align-center" href="https://github.com/cocoyaxi/codoc/edit/master/content/en/co/fastream.md" target="_blank" rel="noopener">
      <img src="../../../svg/edit.svg" class="book-icon" alt="Edit" />
      <span>Edit this page</span>
    </a>
  </div>

</div>

 
        





<script src="//cdn.bootcss.com/highlight.js/11.1.0/highlight.min.js"></script>



<script src="//cdn.bootcss.com/highlight.js/11.1.0/languages/cpp.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/11.1.0/languages/bash.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/11.1.0/languages/lua.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/11.1.0/languages/yaml.min.js"></script>
<script>hljs.configure({ languages: [] }); hljs.initHighlightingOnLoad();</script>





      </footer>

      
  
  <div class="book-comments">


<link rel="stylesheet" href="//cdn.bootcss.com/gitalk/1.7.2/gitalk.min.css">
<script src="//cdn.bootcss.com/gitalk/1.7.2/gitalk.min.js"></script>
<div id="gitalk-container"></div>
<script type="text/javascript">
  var gitalk = new Gitalk({
    clientID: '11f9ff9ca43804d70b32',
    clientSecret: '07e2bd5b09a1654e7942a7698c3ec164e7566177',
    repo: 'gitalk',
    owner: 'idealvin',
    admin: ['idealvin'],
    id: location.pathname,
    language: 'zh-CN',
    distractionFreeMode: false,
    proxy: 'https:\/\/cors-anywhere.azm.workers.dev\/https:\/\/github.com\/login\/oauth\/access_token'
  })
  gitalk.render('gitalk-container');
</script></div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#fastream">fastream</a>
          <ul>
            <li><a href="#fastreamfastream">fastream::fastream</a></li>
            <li><a href="#fastreamoperator">fastream::operator=</a></li>
            <li><a href="#heading">â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</a></li>
            <li><a href="#fastreamback">fastream::back</a></li>
            <li><a href="#fastreamfront">fastream::front</a></li>
            <li><a href="#fastreamoperator-1">fastream::operator[]</a></li>
            <li><a href="#heading-1">â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</a></li>
            <li><a href="#fastreamcapacity">fastream::capacity</a></li>
            <li><a href="#fastreamc_str">fastream::c_str</a></li>
            <li><a href="#fastreamdata">fastream::data</a></li>
            <li><a href="#fastreamempty">fastream::empty</a></li>
            <li><a href="#fastreamsize">fastream::size</a></li>
            <li><a href="#fastreamstr">fastream::str</a></li>
            <li><a href="#heading-2">â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</a></li>
            <li><a href="#fastreamappend">fastream::append</a></li>
            <li><a href="#fastreamcat">fastream::cat</a></li>
            <li><a href="#fastreamoperator-2">fastream::operator&laquo;</a></li>
            <li><a href="#heading-3">â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</a></li>
            <li><a href="#fastreamclear">fastream::clear</a></li>
            <li><a href="#fastreamensure">fastream::ensure</a></li>
            <li><a href="#fastreamreset">fastream::reset</a></li>
            <li><a href="#fastreamreserve">fastream::reserve</a></li>
            <li><a href="#fastreamresize">fastream::resize</a></li>
            <li><a href="#fastreamsafe_clear">fastream::safe_clear</a></li>
            <li><a href="#fastreamswap">fastream::swap</a></li>
            <li><a href="#heading-4">â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</a></li>
            <li><a href="#interoperability-with-fastring">Interoperability with fastring</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












